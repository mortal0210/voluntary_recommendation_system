import{s as N}from"./request.49ddf36e.js";import{_ as Z}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as f,j as ee,a as z,K as le,E as m,b as v,L as te,o as _,c as x,d as h,e as l,w as n,M as ae,l as q,P as j,Q as B,f as d,t as ne,p as oe}from"./index.a5f3312e.js";function ie(g){return N({url:"/school/list",method:"get",params:g})}function ue(g){return N({url:"/school/detail",method:"get",params:{id:g}})}function re(g){return N({url:"/school/save",method:"post",data:g})}function se(g){return N({url:"/school/delete/"+g,method:"delete"})}function de(){return N({url:"/school/types",method:"get"})}const pe={class:"school-query-container"},ve={class:"search-container"},me={class:"tools-container"},ce={class:"pagination-container"},ge={class:"el-pagination__sizes"},ye={class:"dialog-footer"},be={__name:"index",setup(g){const S=f(!1),V=f([]),I=f(0),y=f([]),T=ee(()=>y.value.length!==1),U=f([{value:"1",label:"\u7EFC\u5408\u7C7B"},{value:"2",label:"\u7406\u5DE5\u7C7B"},{value:"3",label:"\u5E08\u8303\u7C7B"},{value:"4",label:"\u533B\u836F\u7C7B"},{value:"5",label:"\u8D22\u7ECF\u7C7B"},{value:"6",label:"\u519C\u6797\u7C7B"},{value:"7",label:"\u827A\u672F\u7C7B"},{value:"8",label:"\u8BED\u8A00\u7C7B"}]),i=z({pageNum:1,pageSize:10,universityId:"",universityName:"",level:"",typeId:"",province:""}),o=z({universityId:"",universityName:"",provinceId:"",province:"",level:"",typeId:"",ranking:0}),P={universityId:[{required:!0,message:"\u9662\u6821\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],universityName:[{required:!0,message:"\u9662\u6821\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],province:[{required:!0,message:"\u6240\u5C5E\u7701\u4EFD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],level:[{required:!0,message:"\u9662\u6821\u5C42\u6B21\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],typeId:[{required:!0,message:"\u9662\u6821\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]},p=z({visible:!1,title:"\u6DFB\u52A0\u9662\u6821"}),w=f(),F=f();le(()=>{de().then(a=>{a.code===200?U.value=a.data.map(e=>({value:e.typeId.toString(),label:e.typeName})):m.warning(a.message||"\u83B7\u53D6\u9662\u6821\u7C7B\u578B\u5931\u8D25")}).catch(a=>{console.error("\u83B7\u53D6\u9662\u6821\u7C7B\u578B\u9519\u8BEF",a),m.warning("\u83B7\u53D6\u9662\u6821\u7C7B\u578B\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")}),k()});const k=()=>{S.value=!0,ie(i).then(a=>{a.code===200?(V.value=a.data.records,I.value=a.data.total):(m.error(a.message||"\u83B7\u53D6\u9662\u6821\u5217\u8868\u5931\u8D25"),V.value=[],I.value=0)}).catch(a=>{console.error("\u83B7\u53D6\u9662\u6821\u5217\u8868\u9519\u8BEF",a),m.error("\u83B7\u53D6\u9662\u6821\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),V.value=[],I.value=0}).finally(()=>{S.value=!1})},R=()=>{var a;(a=F.value)==null||a.resetFields(),i.universityId="",i.universityName="",i.level="",i.typeId="",i.province="",handleQuery()},D=a=>{i.pageSize=a,k()},L=a=>{i.pageNum=a,k()},M=a=>{y.value=a.map(e=>e.universityId)},$=()=>{o.universityId="",o.universityName="",o.provinceId="",o.province="",o.level="",o.typeId="",o.ranking=0,p.title="\u6DFB\u52A0\u9662\u6821",p.visible=!0,setTimeout(()=>{var a;(a=w.value)==null||a.resetFields()},200)},E=a=>{const e=(a==null?void 0:a.universityId)||y.value[0];ue(e).then(r=>{if(r.code===200)Object.assign(o,r.data);else if(m.error(r.message||"\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u5931\u8D25"),a)Object.assign(o,a);else{const u=V.value.find(s=>s.universityId===y.value[0]);u&&Object.assign(o,u)}p.title="\u7F16\u8F91\u9662\u6821",p.visible=!0}).catch(r=>{if(console.error("\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u9519\u8BEF",r),m.error("\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),a)Object.assign(o,a);else{const u=V.value.find(s=>s.universityId===y.value[0]);u&&Object.assign(o,u)}p.title="\u7F16\u8F91\u9662\u6821",p.visible=!0})},K=a=>{const e=(a==null?void 0:a.universityId)||y.value.join(",");oe.confirm("\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u6570\u636E?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>se(e)).then(()=>{m.success("\u5220\u9664\u6210\u529F"),k(),y.value=[]}).catch(()=>{})},A=()=>{K()},G=()=>{var a;(a=w.value)==null||a.validate(e=>{e&&re(o).then(r=>{r.code===200?(m.success("\u64CD\u4F5C\u6210\u529F"),p.visible=!1,k()):m.error(r.message||"\u4FDD\u5B58\u9662\u6821\u4FE1\u606F\u5931\u8D25")}).catch(r=>{console.error("\u4FDD\u5B58\u9662\u6821\u4FE1\u606F\u9519\u8BEF",r),m.error("\u4FDD\u5B58\u9662\u6821\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})})};return(a,e)=>{const r=v("el-input"),u=v("el-form-item"),s=v("el-option"),C=v("el-select"),c=v("el-button"),O=v("el-form"),b=v("el-table-column"),H=v("el-table"),J=v("el-pagination"),Q=v("el-input-number"),W=v("el-dialog"),X=te("loading");return _(),x("div",pe,[h("div",ve,[l(O,{inline:!0,model:i,ref_key:"queryForm",ref:F,class:"search-form"},{default:n(()=>[l(u,{label:"\u9662\u6821\u4EE3\u7801",prop:"universityId"},{default:n(()=>[l(r,{modelValue:i.universityId,"onUpdate:modelValue":e[0]||(e[0]=t=>i.universityId=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801",clearable:"",onKeyup:a.handleQuery,style:{width:"115px"}},null,8,["modelValue","onKeyup"])]),_:1}),l(u,{label:"\u9662\u6821\u540D\u79F0",prop:"universityName"},{default:n(()=>[l(r,{modelValue:i.universityName,"onUpdate:modelValue":e[1]||(e[1]=t=>i.universityName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0",clearable:"",onKeyup:a.handleQuery,style:{width:"115px"}},null,8,["modelValue","onKeyup"])]),_:1}),l(u,{label:"\u9662\u6821\u5C42\u6B21",prop:"level"},{default:n(()=>[l(C,{modelValue:i.level,"onUpdate:modelValue":e[2]||(e[2]=t=>i.level=t),placeholder:"\u8BF7\u9009\u62E9\u9662\u6821\u5C42\u6B21",clearable:"",style:{width:"150px"}},{default:n(()=>[l(s,{label:"985",value:"985"}),l(s,{label:"211",value:"211"}),l(s,{label:"\u4E00\u672C",value:"\u4E00\u672C"}),l(s,{label:"\u4E8C\u672C",value:"\u4E8C\u672C"}),l(s,{label:"\u4E13\u79D1",value:"\u4E13\u79D1"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u9662\u6821\u7C7B\u578B",prop:"typeId"},{default:n(()=>[l(C,{modelValue:i.typeId,"onUpdate:modelValue":e[3]||(e[3]=t=>i.typeId=t),placeholder:"\u8BF7\u9009\u62E9\u9662\u6821\u7C7B\u578B",clearable:"",style:{width:"150px"}},{default:n(()=>[(_(!0),x(j,null,B(U.value,t=>(_(),q(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u7701\u4EFD",prop:"province"},{default:n(()=>[l(r,{modelValue:i.province,"onUpdate:modelValue":e[4]||(e[4]=t=>i.province=t),placeholder:"\u8BF7\u8F93\u5165\u5FC3\u4EEA\u7701\u4EFD",clearable:"",onKeyup:a.handleQuery,style:{width:"115px"}},null,8,["modelValue","onKeyup"])]),_:1}),l(u,null,{default:n(()=>[l(c,{type:"primary",icon:"Search",onClick:a.handleQuery},{default:n(()=>e[17]||(e[17]=[d("\u641C\u7D22")])),_:1,__:[17]},8,["onClick"]),l(c,{icon:"Refresh",onClick:R},{default:n(()=>e[18]||(e[18]=[d("\u91CD\u7F6E")])),_:1,__:[18]})]),_:1})]),_:1},8,["model"])]),h("div",me,[l(c,{type:"primary",plain:"",icon:"Plus",onClick:$},{default:n(()=>e[19]||(e[19]=[d("\u65B0\u589E")])),_:1,__:[19]}),l(c,{type:"success",plain:"",icon:"Edit",disabled:T.value,onClick:E},{default:n(()=>e[20]||(e[20]=[d("\u4FEE\u6539")])),_:1,__:[20]},8,["disabled"]),l(c,{type:"danger",plain:"",icon:"Delete",disabled:y.value.length===0,onClick:A},{default:n(()=>e[21]||(e[21]=[d("\u5220\u9664")])),_:1,__:[21]},8,["disabled"])]),ae((_(),q(H,{data:V.value,onSelectionChange:M,border:""},{default:n(()=>[l(b,{type:"selection",width:"55",align:"center"}),l(b,{label:"\u9662\u6821\u4EE3\u7801",align:"center",prop:"universityId"}),l(b,{label:"\u9662\u6821\u540D\u79F0",align:"center",prop:"universityName"}),l(b,{label:"\u6240\u5C5E\u7701\u4EFD",align:"center",prop:"province",width:"90"}),l(b,{label:"\u6392\u540D",align:"center",prop:"ranking",width:"70"}),l(b,{label:"\u62DB\u751F\u4EBA\u6570",align:"center",prop:"enrollmentNumber",width:"90"}),l(b,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"160"}),l(b,{label:"\u64CD\u4F5C",align:"center",width:"220",fixed:"right"},{default:n(t=>[l(c,{type:"primary",link:"",icon:"Edit",onClick:Y=>E(t.row)},{default:n(()=>e[22]||(e[22]=[d("\u4FEE\u6539")])),_:2,__:[22]},1032,["onClick"]),l(c,{type:"danger",link:"",icon:"Delete",onClick:Y=>K(t.row)},{default:n(()=>e[23]||(e[23]=[d("\u5220\u9664")])),_:2,__:[23]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[X,S.value]]),h("div",ce,[l(J,{"current-page":i.pageNum,"onUpdate:currentPage":e[6]||(e[6]=t=>i.pageNum=t),"page-size":i.pageSize,"onUpdate:pageSize":e[7]||(e[7]=t=>i.pageSize=t),"page-sizes":[5,10,15],total:I.value,layout:"total, sizes, prev, pager, next, jumper","pager-count":5,background:"",onSizeChange:D,onCurrentChange:L,"prev-text":"\u4E0A\u4E00\u9875","next-text":"\u4E0B\u4E00\u9875"},{total:n(()=>[e[24]||(e[24]=d(" \u5171 ")),h("strong",null,ne(I.value),1),e[25]||(e[25]=d(" \u6761\u8BB0\u5F55 "))]),sizes:n(()=>[h("span",ge,[e[26]||(e[26]=d(" \u6BCF\u9875 ")),l(C,{modelValue:i.pageSize,"onUpdate:modelValue":e[5]||(e[5]=t=>i.pageSize=t),onChange:D,disabled:!1},{default:n(()=>[(_(),x(j,null,B([5,10,15],t=>l(s,{key:t,value:t,label:t+" \u6761/\u9875"},null,8,["value","label"])),64))]),_:1},8,["modelValue"])])]),_:1},8,["current-page","page-size","total"])]),l(W,{title:p.title,modelValue:p.visible,"onUpdate:modelValue":e[16]||(e[16]=t=>p.visible=t),width:"600px","append-to-body":""},{footer:n(()=>[h("div",ye,[l(c,{onClick:e[15]||(e[15]=t=>p.visible=!1)},{default:n(()=>e[27]||(e[27]=[d("\u53D6 \u6D88")])),_:1,__:[27]}),l(c,{type:"primary",onClick:G},{default:n(()=>e[28]||(e[28]=[d("\u786E \u5B9A")])),_:1,__:[28]})])]),default:n(()=>[l(O,{ref_key:"schoolFormRef",ref:w,model:o,rules:P,"label-width":"100px"},{default:n(()=>[l(u,{label:"\u9662\u6821\u4EE3\u7801",prop:"universityId"},{default:n(()=>[l(r,{modelValue:o.universityId,"onUpdate:modelValue":e[8]||(e[8]=t=>o.universityId=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u9662\u6821\u540D\u79F0",prop:"universityName"},{default:n(()=>[l(r,{modelValue:o.universityName,"onUpdate:modelValue":e[9]||(e[9]=t=>o.universityName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6240\u5C5E\u7701\u4EFD",prop:"province"},{default:n(()=>[l(r,{modelValue:o.province,"onUpdate:modelValue":e[10]||(e[10]=t=>o.province=t),placeholder:"\u8BF7\u8F93\u5165\u6240\u5C5E\u7701\u4EFD"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u9662\u6821\u5C42\u6B21",prop:"level"},{default:n(()=>[l(C,{modelValue:o.level,"onUpdate:modelValue":e[11]||(e[11]=t=>o.level=t),placeholder:"\u8BF7\u9009\u62E9\u9662\u6821\u5C42\u6B21",style:{width:"100%"}},{default:n(()=>[l(s,{label:"985",value:"985"}),l(s,{label:"211",value:"211"}),l(s,{label:"\u4E00\u672C",value:"\u4E00\u672C"}),l(s,{label:"\u4E8C\u672C",value:"\u4E8C\u672C"}),l(s,{label:"\u4E13\u79D1",value:"\u4E13\u79D1"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u9662\u6821\u7C7B\u578B",prop:"typeId"},{default:n(()=>[l(C,{modelValue:o.typeId,"onUpdate:modelValue":e[12]||(e[12]=t=>o.typeId=t),placeholder:"\u8BF7\u9009\u62E9\u9662\u6821\u7C7B\u578B",style:{width:"100%"}},{default:n(()=>[(_(!0),x(j,null,B(U.value,t=>(_(),q(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u6392\u540D",prop:"ranking"},{default:n(()=>[l(Q,{modelValue:o.ranking,"onUpdate:modelValue":e[13]||(e[13]=t=>o.ranking=t),min:1,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"\u62DB\u751F\u4EBA\u6570",prop:"studentCount"},{default:n(()=>[l(Q,{modelValue:o.studentCount,"onUpdate:modelValue":e[14]||(e[14]=t=>o.studentCount=t),min:0,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},he=Z(be,[["__scopeId","data-v-0ad4754d"]]);export{he as default};
