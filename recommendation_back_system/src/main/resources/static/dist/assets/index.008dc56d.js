import{s as S}from"./request.49ddf36e.js";import{_ as le}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as _,j as te,a as z,K as ae,E as c,b as m,L as ne,o as V,c as E,d as x,e as l,w as n,M as oe,l as q,P as j,Q as B,f as s,t as de,p as ue}from"./index.a5f3312e.js";function re(b){return S({url:"/student/list",method:"get",params:b})}function se(b){return S({url:"/student/detail",method:"get",params:{id:b}})}function ie(b){return S({url:"/student/save",method:"post",data:b})}function pe(b){return S({url:"/student/delete/"+b,method:"delete"})}function me(){return S({url:"/common/provinces",method:"get"})}const ge={class:"student-container"},ce={class:"search-container"},ve={class:"tools-container"},be={class:"pagination-container"},fe={class:"el-pagination__sizes"},_e={class:"dialog-footer"},Ve={__name:"index",setup(b){const h=_(!1),y=_([]),C=_(0),f=_([]),T=te(()=>f.value.length!==1),U=_([{value:"1",label:"\u5317\u4EAC\u5E02"},{value:"2",label:"\u5929\u6D25\u5E02"},{value:"3",label:"\u6CB3\u5317\u7701"},{value:"4",label:"\u5C71\u897F\u7701"},{value:"5",label:"\u5185\u8499\u53E4\u81EA\u6CBB\u533A"},{value:"6",label:"\u8FBD\u5B81\u7701"},{value:"7",label:"\u5409\u6797\u7701"},{value:"8",label:"\u9ED1\u9F99\u6C5F\u7701"},{value:"9",label:"\u4E0A\u6D77\u5E02"},{value:"10",label:"\u6C5F\u82CF\u7701"},{value:"11",label:"\u6D59\u6C5F\u7701"},{value:"12",label:"\u5B89\u5FBD\u7701"},{value:"13",label:"\u798F\u5EFA\u7701"},{value:"14",label:"\u6C5F\u897F\u7701"},{value:"15",label:"\u5C71\u4E1C\u7701"},{value:"16",label:"\u6CB3\u5357\u7701"},{value:"17",label:"\u6E56\u5317\u7701"},{value:"18",label:"\u6E56\u5357\u7701"},{value:"19",label:"\u5E7F\u4E1C\u7701"},{value:"20",label:"\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A"},{value:"21",label:"\u6D77\u5357\u7701"},{value:"22",label:"\u91CD\u5E86\u5E02"},{value:"23",label:"\u56DB\u5DDD\u7701"},{value:"24",label:"\u8D35\u5DDE\u7701"},{value:"25",label:"\u4E91\u5357\u7701"},{value:"26",label:"\u897F\u85CF\u81EA\u6CBB\u533A"},{value:"27",label:"\u9655\u897F\u7701"},{value:"28",label:"\u7518\u8083\u7701"},{value:"29",label:"\u9752\u6D77\u7701"},{value:"30",label:"\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A"},{value:"31",label:"\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A"}]),d=z({pageNum:1,pageSize:10,studentId:"",studentName:"",gender:"",provinceId:""}),o=z({studentId:"",studentName:"",gender:"",idCard:"",collegeEntranceExamScore:0,provinceId:"",ranking:0}),M={studentId:[{required:!0,message:"\u5B66\u751F\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],studentName:[{required:!0,message:"\u5B66\u751F\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],gender:[{required:!0,message:"\u6027\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],idCard:[{required:!0,message:"\u8EAB\u4EFD\u8BC1\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],collegeEntranceExamScore:[{required:!0,message:"\u9AD8\u8003\u6210\u7EE9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],provinceId:[{required:!0,message:"\u6240\u5C5E\u7701\u4EFD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]},i=z({visible:!1,title:"\u6DFB\u52A0\u5B66\u751F"}),w=_(),F=_();ae(()=>{I(),K()});const K=()=>{me().then(a=>{a.code===200&&a.data?U.value=a.data.map(e=>({value:e.provinceId.toString(),label:e.provinceName})):c.warning(a.message||"\u83B7\u53D6\u7701\u4EFD\u6570\u636E\u5931\u8D25")}).catch(a=>{console.error("\u83B7\u53D6\u7701\u4EFD\u6570\u636E\u9519\u8BEF",a),c.warning("\u83B7\u53D6\u7701\u4EFD\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})},I=()=>{h.value=!0,re(d).then(a=>{a.code===200?(y.value=a.data.records,C.value=a.data.total):(c.error(a.message||"\u83B7\u53D6\u5B66\u751F\u5217\u8868\u5931\u8D25"),y.value=[],C.value=0)}).catch(a=>{console.error("\u83B7\u53D6\u5B66\u751F\u5217\u8868\u9519\u8BEF",a),c.error("\u83B7\u53D6\u5B66\u751F\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),y.value=[],C.value=0}).finally(()=>{h.value=!1})},N=()=>{d.pageNum=1,I()},Q=()=>{var a;(a=F.value)==null||a.resetFields(),d.studentId="",d.studentName="",d.gender="",d.provinceId="",N()},O=a=>{d.pageSize=a,I()},$=a=>{d.pageNum=a,I()},A=a=>{f.value=a.map(e=>e.studentId)},G=()=>{o.studentId="",o.studentName="",o.gender="",o.idCard="",o.collegeEntranceExamScore=0,o.provinceId="",o.ranking=0,i.title="\u6DFB\u52A0\u5B66\u751F",i.visible=!0,setTimeout(()=>{var a;(a=w.value)==null||a.resetFields()},200)},D=a=>{const e=(a==null?void 0:a.studentId)||f.value[0];se(e).then(r=>{if(r.code===200)Object.assign(o,r.data);else if(c.error(r.message||"\u83B7\u53D6\u5B66\u751F\u4FE1\u606F\u5931\u8D25"),a)Object.assign(o,a);else{const u=y.value.find(p=>p.studentId===f.value[0]);u&&Object.assign(o,u)}i.title="\u7F16\u8F91\u5B66\u751F",i.visible=!0}).catch(r=>{if(console.error("\u83B7\u53D6\u5B66\u751F\u4FE1\u606F\u9519\u8BEF",r),c.error("\u83B7\u53D6\u5B66\u751F\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),a)Object.assign(o,a);else{const u=y.value.find(p=>p.studentId===f.value[0]);u&&Object.assign(o,u)}i.title="\u7F16\u8F91\u5B66\u751F",i.visible=!0})},P=a=>{const e=(a==null?void 0:a.studentId)||f.value.join(",");ue.confirm("\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u6570\u636E?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>pe(e)).then(()=>{c.success("\u5220\u9664\u6210\u529F"),I(),f.value=[]}).catch(()=>{})},H=()=>{P()},J=()=>{var a;(a=w.value)==null||a.validate(e=>{e&&ie(o).then(r=>{r.code===200?(c.success("\u64CD\u4F5C\u6210\u529F"),i.visible=!1,I()):c.error(r.message||"\u64CD\u4F5C\u5931\u8D25")}).catch(r=>{console.error("\u4FDD\u5B58\u5B66\u751F\u4FE1\u606F\u9519\u8BEF",r),c.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})})};return(a,e)=>{const r=m("el-input"),u=m("el-form-item"),p=m("el-option"),k=m("el-select"),v=m("el-button"),L=m("el-form"),g=m("el-table-column"),W=m("el-table"),X=m("el-pagination"),R=m("el-input-number"),Y=m("el-dialog"),Z=ne("loading");return V(),E("div",ge,[x("div",ce,[l(L,{inline:!0,model:d,ref_key:"queryForm",ref:F,class:"search-form"},{default:n(()=>[l(u,{label:"\u5B66\u751F\u7F16\u53F7",prop:"studentId"},{default:n(()=>[l(r,{modelValue:d.studentId,"onUpdate:modelValue":e[0]||(e[0]=t=>d.studentId=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u751F\u7F16\u53F7",clearable:"",onKeyup:N,style:{width:"150px"}},null,8,["modelValue"])]),_:1}),l(u,{label:"\u5B66\u751F\u59D3\u540D",prop:"studentName"},{default:n(()=>[l(r,{modelValue:d.studentName,"onUpdate:modelValue":e[1]||(e[1]=t=>d.studentName=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u751F\u59D3\u540D",clearable:"",onKeyup:N,style:{width:"150px"}},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6027\u522B",prop:"gender"},{default:n(()=>[l(k,{modelValue:d.gender,"onUpdate:modelValue":e[2]||(e[2]=t=>d.gender=t),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",clearable:"",style:{width:"150px"}},{default:n(()=>[l(p,{label:"\u7537",value:"\u7537"}),l(p,{label:"\u5973",value:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u7701\u4EFD",prop:"provinceId"},{default:n(()=>[l(k,{modelValue:d.provinceId,"onUpdate:modelValue":e[3]||(e[3]=t=>d.provinceId=t),placeholder:"\u8BF7\u9009\u62E9\u7701\u4EFD",clearable:"",style:{width:"150px"}},{default:n(()=>[(V(!0),E(j,null,B(U.value,t=>(V(),q(p,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(v,{type:"primary",icon:"Search",onClick:N},{default:n(()=>e[16]||(e[16]=[s("\u641C\u7D22")])),_:1,__:[16]}),l(v,{icon:"Refresh",onClick:Q},{default:n(()=>e[17]||(e[17]=[s("\u91CD\u7F6E")])),_:1,__:[17]})]),_:1})]),_:1},8,["model"])]),x("div",ve,[l(v,{type:"primary",plain:"",icon:"Plus",onClick:G},{default:n(()=>e[18]||(e[18]=[s("\u65B0\u589E")])),_:1,__:[18]}),l(v,{type:"success",plain:"",icon:"Edit",disabled:T.value,onClick:D},{default:n(()=>e[19]||(e[19]=[s("\u4FEE\u6539")])),_:1,__:[19]},8,["disabled"]),l(v,{type:"danger",plain:"",icon:"Delete",disabled:f.value.length===0,onClick:H},{default:n(()=>e[20]||(e[20]=[s("\u5220\u9664")])),_:1,__:[20]},8,["disabled"])]),oe((V(),q(W,{data:y.value,onSelectionChange:A,border:""},{default:n(()=>[l(g,{type:"selection",width:"55",align:"center"}),l(g,{label:"\u5B66\u751F\u7F16\u53F7",align:"center",prop:"studentId"}),l(g,{label:"\u5B66\u751F\u59D3\u540D",align:"center",prop:"studentName"}),l(g,{label:"\u6027\u522B",align:"center",prop:"gender",width:"60"}),l(g,{label:"\u8EAB\u4EFD\u8BC1\u53F7",align:"center",prop:"idCard",width:"180"}),l(g,{label:"\u9AD8\u8003\u6210\u7EE9",align:"center",prop:"collegeEntranceExamScore",width:"90"}),l(g,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"160"}),l(g,{label:"\u6240\u5C5E\u7701\u4EFD",align:"center",prop:"provinceName"}),l(g,{label:"\u6392\u540D",align:"center",prop:"ranking",width:"80"}),l(g,{label:"\u64CD\u4F5C",align:"center",width:"220",fixed:"right"},{default:n(t=>[l(v,{type:"primary",link:"",icon:"Edit",onClick:ee=>D(t.row)},{default:n(()=>e[21]||(e[21]=[s("\u4FEE\u6539")])),_:2,__:[21]},1032,["onClick"]),l(v,{type:"danger",link:"",icon:"Delete",onClick:ee=>P(t.row)},{default:n(()=>e[22]||(e[22]=[s("\u5220\u9664")])),_:2,__:[22]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,h.value]]),x("div",be,[l(X,{"current-page":d.pageNum,"onUpdate:currentPage":e[5]||(e[5]=t=>d.pageNum=t),"page-size":d.pageSize,"onUpdate:pageSize":e[6]||(e[6]=t=>d.pageSize=t),"page-sizes":[5,10,15],total:C.value,layout:"total, sizes, prev, pager, next, jumper","pager-count":5,background:"",onSizeChange:O,onCurrentChange:$,"prev-text":"\u4E0A\u4E00\u9875","next-text":"\u4E0B\u4E00\u9875"},{total:n(()=>[e[23]||(e[23]=s(" \u5171 ")),x("strong",null,de(C.value),1),e[24]||(e[24]=s(" \u6761\u8BB0\u5F55 "))]),sizes:n(()=>[x("span",fe,[e[25]||(e[25]=s(" \u6BCF\u9875 ")),l(k,{modelValue:d.pageSize,"onUpdate:modelValue":e[4]||(e[4]=t=>d.pageSize=t),onChange:O,disabled:!1},{default:n(()=>[(V(),E(j,null,B([5,10,15],t=>l(p,{key:t,value:t,label:t+" \u6761/\u9875"},null,8,["value","label"])),64))]),_:1},8,["modelValue"])])]),_:1},8,["current-page","page-size","total"])]),l(Y,{title:i.title,modelValue:i.visible,"onUpdate:modelValue":e[15]||(e[15]=t=>i.visible=t),width:"600px","append-to-body":""},{footer:n(()=>[x("div",_e,[l(v,{onClick:e[14]||(e[14]=t=>i.visible=!1)},{default:n(()=>e[26]||(e[26]=[s("\u53D6 \u6D88")])),_:1,__:[26]}),l(v,{type:"primary",onClick:J},{default:n(()=>e[27]||(e[27]=[s("\u786E \u5B9A")])),_:1,__:[27]})])]),default:n(()=>[l(L,{ref_key:"studentFormRef",ref:w,model:o,rules:M,"label-width":"100px"},{default:n(()=>[l(u,{label:"\u5B66\u751F\u7F16\u53F7",prop:"studentId"},{default:n(()=>[l(r,{modelValue:o.studentId,"onUpdate:modelValue":e[7]||(e[7]=t=>o.studentId=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u751F\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u5B66\u751F\u59D3\u540D",prop:"studentName"},{default:n(()=>[l(r,{modelValue:o.studentName,"onUpdate:modelValue":e[8]||(e[8]=t=>o.studentName=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u751F\u59D3\u540D"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6027\u522B",prop:"gender"},{default:n(()=>[l(k,{modelValue:o.gender,"onUpdate:modelValue":e[9]||(e[9]=t=>o.gender=t),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",style:{width:"100%"}},{default:n(()=>[l(p,{label:"\u7537",value:"\u7537"}),l(p,{label:"\u5973",value:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u8EAB\u4EFD\u8BC1\u53F7",prop:"idCard"},{default:n(()=>[l(r,{modelValue:o.idCard,"onUpdate:modelValue":e[10]||(e[10]=t=>o.idCard=t),placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u9AD8\u8003\u6210\u7EE9",prop:"collegeEntranceExamScore"},{default:n(()=>[l(R,{modelValue:o.collegeEntranceExamScore,"onUpdate:modelValue":e[11]||(e[11]=t=>o.collegeEntranceExamScore=t),min:0,max:750,precision:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6240\u5C5E\u7701\u4EFD",prop:"provinceId"},{default:n(()=>[l(k,{modelValue:o.provinceId,"onUpdate:modelValue":e[12]||(e[12]=t=>o.provinceId=t),placeholder:"\u8BF7\u9009\u62E9\u7701\u4EFD",style:{width:"100%"}},{default:n(()=>[(V(!0),E(j,null,B(U.value,t=>(V(),q(p,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u6392\u540D",prop:"ranking"},{default:n(()=>[l(R,{modelValue:o.ranking,"onUpdate:modelValue":e[13]||(e[13]=t=>o.ranking=t),min:0,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},Ce=le(Ve,[["__scopeId","data-v-2a34aa2b"]]);export{Ce as default};
