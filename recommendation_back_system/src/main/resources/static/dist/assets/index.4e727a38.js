import{s as V}from"./request.49ddf36e.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as y,j as H,a as x,K as J,E as _,b as g,L as W,o as L,c as X,d as C,e as l,w as a,M as Y,l as Z,f as m,t as ee,p as le}from"./index.a5f3312e.js";function oe(c){return V({url:"/major/list",method:"get",params:c})}function te(c){return V({url:"/major/detail",method:"get",params:{id:c}})}function ae(c){return V({url:"/major/save",method:"post",data:c})}function ne(c){return V({url:"/major/delete/"+c,method:"delete"})}const re={class:"major-query-container"},ie={class:"search-container"},de={class:"tools-container"},se={class:"pagination-container"},ue={class:"dialog-footer"},me={__name:"index",setup(c){const N=y(!1),b=y([]),h=y(0),f=y([]),q=H(()=>f.value.length!==1),r=x({pageNum:1,pageSize:10,schoolCode:"",schoolName:"",majorCode:"",majorName:""}),n=x({majorId:"",majorName:"",disciplineCategoryId:"",schoolingLength:4,degreeType:"",lineScore:0}),w={majorId:[{required:!0,message:"\u4E13\u4E1A\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],majorName:[{required:!0,message:"\u4E13\u4E1A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],disciplineCategoryId:[{required:!0,message:"\u5B66\u79D1\u95E8\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],schoolingLength:[{required:!0,message:"\u5B66\u5236\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],degreeType:[{required:!0,message:"\u5B66\u4F4D\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},u=x({visible:!1,title:"\u6DFB\u52A0\u4E13\u4E1A"}),I=y(),k=y();J(()=>{v()});const v=()=>{N.value=!0,oe(r).then(o=>{o.code===200?(b.value=o.data.records,h.value=o.data.total):(_.error(o.message||"\u83B7\u53D6\u4E13\u4E1A\u5217\u8868\u5931\u8D25"),b.value=[],h.value=0)}).catch(o=>{console.error("\u83B7\u53D6\u4E13\u4E1A\u5217\u8868\u9519\u8BEF",o),_.error("\u83B7\u53D6\u4E13\u4E1A\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),b.value=[],h.value=0}).finally(()=>{N.value=!1})},j=()=>{r.pageNum=1,v()},B=()=>{var o;(o=k.value)==null||o.resetFields(),r.schoolCode="",r.schoolName="",r.majorCode="",r.majorName="",j()},M=o=>{r.pageSize=o,v()},D=o=>{r.pageNum=o,v()},E=o=>{f.value=o.map(e=>e.majorId)},F=()=>{n.majorId="",n.majorName="",n.disciplineCategoryId="",n.schoolingLength=4,n.degreeType="",n.lineScore=0,u.title="\u6DFB\u52A0\u4E13\u4E1A",u.visible=!0,setTimeout(()=>{var o;(o=I.value)==null||o.resetFields()},200)},S=o=>{const e=(o==null?void 0:o.majorId)||f.value[0];te(e).then(i=>{if(i.code===200)Object.assign(n,i.data);else if(_.error(i.message||"\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25"),o)Object.assign(n,o);else{const d=b.value.find(s=>s.majorId===f.value[0]);d&&Object.assign(n,d)}u.title="\u7F16\u8F91\u4E13\u4E1A",u.visible=!0}).catch(i=>{if(console.error("\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u9519\u8BEF",i),_.error("\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),o)Object.assign(n,o);else{const d=b.value.find(s=>s.majorId===f.value[0]);d&&Object.assign(n,d)}u.title="\u7F16\u8F91\u4E13\u4E1A",u.visible=!0})},U=o=>{const e=(o==null?void 0:o.majorId)||f.value.join(",");le.confirm("\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u6570\u636E?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>ne(e)).then(()=>{_.success("\u5220\u9664\u6210\u529F"),v(),f.value=[]}).catch(()=>{})},O=()=>{U()},K=()=>{var o;(o=I.value)==null||o.validate(e=>{e&&ae(n).then(i=>{i.code===200?(_.success("\u64CD\u4F5C\u6210\u529F"),u.visible=!1,v()):_.error(i.message||"\u4FDD\u5B58\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25")}).catch(i=>{console.error("\u4FDD\u5B58\u4E13\u4E1A\u4FE1\u606F\u9519\u8BEF",i),_.error("\u4FDD\u5B58\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})})};return(o,e)=>{const i=g("el-input"),d=g("el-form-item"),s=g("el-button"),z=g("el-form"),p=g("el-table-column"),R=g("el-table"),P=g("el-pagination"),T=g("el-input-number"),$=g("el-dialog"),Q=W("loading");return L(),X("div",re,[C("div",ie,[l(z,{inline:!0,model:r,ref_key:"queryForm",ref:k,class:"search-form"},{default:a(()=>[l(d,{label:"\u9662\u6821\u4EE3\u7801",prop:"schoolCode"},{default:a(()=>[l(i,{modelValue:r.schoolCode,"onUpdate:modelValue":e[0]||(e[0]=t=>r.schoolCode=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801",clearable:"",onKeyup:j,style:{width:"140px"}},null,8,["modelValue"])]),_:1}),l(d,{label:"\u9662\u6821\u540D\u79F0",prop:"schoolName"},{default:a(()=>[l(i,{modelValue:r.schoolName,"onUpdate:modelValue":e[1]||(e[1]=t=>r.schoolName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0",clearable:"",onKeyup:j,style:{width:"140px"}},null,8,["modelValue"])]),_:1}),l(d,{label:"\u4E13\u4E1A\u4EE3\u7801",prop:"majorCode"},{default:a(()=>[l(i,{modelValue:r.majorCode,"onUpdate:modelValue":e[2]||(e[2]=t=>r.majorCode=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u4EE3\u7801",clearable:"",onKeyup:j,style:{width:"140px"}},null,8,["modelValue"])]),_:1}),l(d,{label:"\u4E13\u4E1A\u540D\u79F0",prop:"majorName"},{default:a(()=>[l(i,{modelValue:r.majorName,"onUpdate:modelValue":e[3]||(e[3]=t=>r.majorName=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",clearable:"",onKeyup:j,style:{width:"140px"}},null,8,["modelValue"])]),_:1}),l(d,null,{default:a(()=>[l(s,{type:"primary",icon:"Search",onClick:j},{default:a(()=>e[14]||(e[14]=[m("\u641C\u7D22")])),_:1,__:[14]}),l(s,{icon:"Refresh",onClick:B},{default:a(()=>e[15]||(e[15]=[m("\u91CD\u7F6E")])),_:1,__:[15]})]),_:1})]),_:1},8,["model"])]),C("div",de,[l(s,{type:"primary",plain:"",icon:"Plus",onClick:F},{default:a(()=>e[16]||(e[16]=[m("\u65B0\u589E")])),_:1,__:[16]}),l(s,{type:"success",plain:"",icon:"Edit",disabled:q.value,onClick:S},{default:a(()=>e[17]||(e[17]=[m("\u4FEE\u6539")])),_:1,__:[17]},8,["disabled"]),l(s,{type:"danger",plain:"",icon:"Delete",disabled:f.value.length===0,onClick:O},{default:a(()=>e[18]||(e[18]=[m("\u5220\u9664")])),_:1,__:[18]},8,["disabled"])]),Y((L(),Z(R,{data:b.value,onSelectionChange:E,border:""},{default:a(()=>[l(p,{type:"selection",width:"55",align:"center"}),l(p,{label:"\u4E13\u4E1A\u4EE3\u7801",align:"center",prop:"majorId"}),l(p,{label:"\u4E13\u4E1A\u540D\u79F0",align:"center",prop:"majorName"}),l(p,{label:"\u9662\u6821\u4EE3\u7801",align:"center",prop:"universityId"}),l(p,{label:"\u9662\u6821\u540D\u79F0",align:"center",prop:"universityName"}),l(p,{label:"\u4FEE\u4E1A\u5E74\u9650",align:"center",prop:"schoolingLength",width:"90"}),l(p,{label:"\u5206\u6570\u7EBF",align:"center",prop:"lineScore",width:"90"}),l(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"160"}),l(p,{label:"\u64CD\u4F5C",align:"center",width:"220",fixed:"right"},{default:a(t=>[l(s,{type:"primary",link:"",icon:"Edit",onClick:A=>S(t.row)},{default:a(()=>e[19]||(e[19]=[m("\u4FEE\u6539")])),_:2,__:[19]},1032,["onClick"]),l(s,{type:"danger",link:"",icon:"Delete",onClick:A=>U(t.row)},{default:a(()=>e[20]||(e[20]=[m("\u5220\u9664")])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,N.value]]),C("div",se,[l(P,{"current-page":r.pageNum,"onUpdate:currentPage":e[4]||(e[4]=t=>r.pageNum=t),"page-size":r.pageSize,"onUpdate:pageSize":e[5]||(e[5]=t=>r.pageSize=t),"page-sizes":[5,10,15],total:h.value,layout:"total, sizes, prev, pager, next, jumper","pager-count":5,background:"",onSizeChange:M,onCurrentChange:D},{total:a(()=>[e[21]||(e[21]=m(" \u5171 ")),C("strong",null,ee(h.value),1),e[22]||(e[22]=m(" \u6761\u8BB0\u5F55 "))]),_:1},8,["current-page","page-size","total"])]),l($,{title:u.title,modelValue:u.visible,"onUpdate:modelValue":e[13]||(e[13]=t=>u.visible=t),width:"600px","append-to-body":""},{footer:a(()=>[C("div",ue,[l(s,{onClick:e[12]||(e[12]=t=>u.visible=!1)},{default:a(()=>e[23]||(e[23]=[m("\u53D6 \u6D88")])),_:1,__:[23]}),l(s,{type:"primary",onClick:K},{default:a(()=>e[24]||(e[24]=[m("\u786E \u5B9A")])),_:1,__:[24]})])]),default:a(()=>[l(z,{ref_key:"majorFormRef",ref:I,model:n,rules:w,"label-width":"100px"},{default:a(()=>[l(d,{label:"\u4E13\u4E1A\u4EE3\u7801",prop:"majorId"},{default:a(()=>[l(i,{modelValue:n.majorId,"onUpdate:modelValue":e[6]||(e[6]=t=>n.majorId=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u4EE3\u7801"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u4E13\u4E1A\u540D\u79F0",prop:"majorName"},{default:a(()=>[l(i,{modelValue:n.majorName,"onUpdate:modelValue":e[7]||(e[7]=t=>n.majorName=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5B66\u79D1\u95E8\u7C7B",prop:"disciplineCategoryId"},{default:a(()=>[l(i,{modelValue:n.disciplineCategoryId,"onUpdate:modelValue":e[8]||(e[8]=t=>n.disciplineCategoryId=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u79D1\u95E8\u7C7B"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5B66\u5236",prop:"schoolingLength"},{default:a(()=>[l(T,{modelValue:n.schoolingLength,"onUpdate:modelValue":e[9]||(e[9]=t=>n.schoolingLength=t),min:1,max:10,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5B66\u4F4D\u7C7B\u578B",prop:"degreeType"},{default:a(()=>[l(i,{modelValue:n.degreeType,"onUpdate:modelValue":e[10]||(e[10]=t=>n.degreeType=t),placeholder:"\u8BF7\u8F93\u5165\u5B66\u4F4D\u7C7B\u578B"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5206\u6570\u7EBF",prop:"lineScore"},{default:a(()=>[l(T,{modelValue:n.lineScore,"onUpdate:modelValue":e[11]||(e[11]=t=>n.lineScore=t),min:0,max:750,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},fe=G(me,[["__scopeId","data-v-c8337ae7"]]);export{fe as default};
