import{g as j,a as N,s as y}from"./application.b8ba31d1.js";import{_}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as g,b as f,o as b,c as C,d as l,e as n,w as i,E as a,f as m}from"./index.a5f3312e.js";import"./request.49ddf36e.js";const h={class:"application-apply-container"},U={class:"volunteer-section"},w={class:"volunteer-form"},x={class:"form-item"},$={class:"form-item"},S={class:"form-item"},O={class:"form-item"},k={class:"form-item"},B={class:"volunteer-section"},E={class:"volunteer-form"},M={class:"form-item"},A={class:"form-item"},P={class:"form-item"},z={class:"form-item"},D={class:"form-item"},F={class:"volunteer-section"},T={class:"volunteer-form"},q={class:"form-item"},G={class:"form-item"},H={class:"form-item"},J={class:"form-item"},K={class:"form-item"},L={class:"submit-all"},Q={__name:"index",setup(R){const r=g({first:{universityId:"",universityName:"",majorName:"",majorId:"",volunteerOrder:1},second:{universityId:"",universityName:"",majorName:"",majorId:"",volunteerOrder:2},third:{universityId:"",universityName:"",majorName:"",majorId:"",volunteerOrder:3}}),u=d=>{switch(d){case 1:return r.first;case 2:return r.second;case 3:return r.third;default:return null}},v=async d=>{const e=u(d);if(!(!e||!e.universityId))try{const o=await j(e.universityId);o.code===200&&o.data?e.universityName=o.data.universityName:(a.warning(o.message||"\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u5931\u8D25"),e.universityName="")}catch(o){console.error("\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u5931\u8D25",o),a.error("\u83B7\u53D6\u9662\u6821\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),e.universityName=""}},c=async d=>{const e=u(d);if(!(!e||!e.majorId))try{const o=await N(e.majorId);o.code===200&&o.data?e.majorName=o.data.majorName:(a.warning(o.message||"\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25"),e.majorName="")}catch(o){console.error("\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25",o),a.error("\u83B7\u53D6\u4E13\u4E1A\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001"),e.majorName=""}},p=d=>{const e=u(d);if(!e.universityId||!e.universityName||!e.majorId||!e.majorName){a.warning("\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u5FD7\u613F\u4FE1\u606F");return}y({volunteerOrder:e.volunteerOrder,universityId:e.universityId,majorId:e.majorId,studentId:localStorage.getItem("userId")||"1001"}).then(o=>{o.code===200?a.success("\u5FD7\u613F\u63D0\u4EA4\u6210\u529F"):a.error(o.message||"\u5FD7\u613F\u63D0\u4EA4\u5931\u8D25")}).catch(o=>{console.error("\u5FD7\u613F\u63D0\u4EA4\u9519\u8BEF",o),a.error("\u5FD7\u613F\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})},V=()=>{const d=[r.first,r.second,r.third];if(!d.every(s=>s.universityId&&s.universityName&&s.majorId&&s.majorName)){a.warning("\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u5FD7\u613F\u4FE1\u606F");return}const o=d.map(s=>({volunteerOrder:s.volunteerOrder,universityId:s.universityId,majorId:s.majorId,studentId:localStorage.getItem("userId")||"1001"}));Promise.all(o.map(s=>y(s))).then(s=>{s.every(I=>I.code===200)?a.success("\u6240\u6709\u5FD7\u613F\u63D0\u4EA4\u6210\u529F"):a.warning("\u90E8\u5206\u5FD7\u613F\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}).catch(s=>{console.error("\u5FD7\u613F\u63D0\u4EA4\u9519\u8BEF",s),a.error("\u5FD7\u613F\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")})};return(d,e)=>{const o=f("el-input"),s=f("el-button");return b(),C("div",h,[l("div",U,[e[22]||(e[22]=l("div",{class:"section-title"},"\u7B2C\u4E00\u5FD7\u613F",-1)),l("div",w,[l("div",x,[n(o,{modelValue:r.first.universityId,"onUpdate:modelValue":e[0]||(e[0]=t=>r.first.universityId=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801",clearable:"",onChange:e[1]||(e[1]=t=>v(1))},null,8,["modelValue"])]),l("div",$,[n(o,{modelValue:r.first.universityName,"onUpdate:modelValue":e[2]||(e[2]=t=>r.first.universityName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",S,[n(o,{modelValue:r.first.majorId,"onUpdate:modelValue":e[3]||(e[3]=t=>r.first.majorId=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u4EE3\u7801",clearable:"",onChange:e[4]||(e[4]=t=>c(1))},null,8,["modelValue"])]),l("div",O,[n(o,{modelValue:r.first.majorName,"onUpdate:modelValue":e[5]||(e[5]=t=>r.first.majorName=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",k,[n(s,{type:"primary",onClick:e[6]||(e[6]=t=>p(1))},{default:i(()=>e[21]||(e[21]=[m("\u63D0\u4EA4")])),_:1,__:[21]})])])]),l("div",B,[e[24]||(e[24]=l("div",{class:"section-title"},"\u7B2C\u4E8C\u5FD7\u613F",-1)),l("div",E,[l("div",M,[n(o,{modelValue:r.second.universityId,"onUpdate:modelValue":e[7]||(e[7]=t=>r.second.universityId=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801",clearable:"",onChange:e[8]||(e[8]=t=>v(2))},null,8,["modelValue"])]),l("div",A,[n(o,{modelValue:r.second.universityName,"onUpdate:modelValue":e[9]||(e[9]=t=>r.second.universityName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",P,[n(o,{modelValue:r.second.majorName,"onUpdate:modelValue":e[10]||(e[10]=t=>r.second.majorName=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",z,[n(o,{modelValue:r.second.majorId,"onUpdate:modelValue":e[11]||(e[11]=t=>r.second.majorId=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u4EE3\u7801",clearable:"",onChange:e[12]||(e[12]=t=>c(2))},null,8,["modelValue"])]),l("div",D,[n(s,{type:"primary",onClick:e[13]||(e[13]=t=>p(2))},{default:i(()=>e[23]||(e[23]=[m("\u63D0\u4EA4")])),_:1,__:[23]})])])]),l("div",F,[e[26]||(e[26]=l("div",{class:"section-title"},"\u7B2C\u4E09\u5FD7\u613F",-1)),l("div",T,[l("div",q,[n(o,{modelValue:r.third.universityId,"onUpdate:modelValue":e[14]||(e[14]=t=>r.third.universityId=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u4EE3\u7801",clearable:"",onChange:e[15]||(e[15]=t=>v(3))},null,8,["modelValue"])]),l("div",G,[n(o,{modelValue:r.third.universityName,"onUpdate:modelValue":e[16]||(e[16]=t=>r.third.universityName=t),placeholder:"\u8BF7\u8F93\u5165\u9662\u6821\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",H,[n(o,{modelValue:r.third.majorName,"onUpdate:modelValue":e[17]||(e[17]=t=>r.third.majorName=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",clearable:""},null,8,["modelValue"])]),l("div",J,[n(o,{modelValue:r.third.majorId,"onUpdate:modelValue":e[18]||(e[18]=t=>r.third.majorId=t),placeholder:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u4EE3\u7801",clearable:"",onChange:e[19]||(e[19]=t=>c(3))},null,8,["modelValue"])]),l("div",K,[n(s,{type:"primary",onClick:e[20]||(e[20]=t=>p(3))},{default:i(()=>e[25]||(e[25]=[m("\u63D0\u4EA4")])),_:1,__:[25]})])])]),l("div",L,[n(s,{type:"success",size:"large",onClick:V},{default:i(()=>e[27]||(e[27]=[m("\u63D0\u4EA4\u6240\u6709\u5FD7\u613F")])),_:1,__:[27]})])])}}},ee=_(Q,[["__scopeId","data-v-b790c87b"]]);export{ee as default};
