import{u as V,r as _,a as p,b as n,o as I,c as R,d,e as r,w as t,f,E as m}from"./index.a5f3312e.js";import{l as C}from"./user.a4538a8d.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import"./request.49ddf36e.js";const U={class:"login-container"},h={class:"login-box"},B={__name:"index",setup(E){const g=V(),u=_(!1),c=_(),s=p({username:"",password:"",rememberMe:!1}),v=p({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]}),x=async()=>{try{await c.value.validate(async i=>{var e,l;if(i){u.value=!0;try{const o=await C(s);o.code===200?(localStorage.setItem("token",((e=o.data)==null?void 0:e.token)||"default-token"),(l=o.data)!=null&&l.userId&&localStorage.setItem("userId",o.data.userId),m.success("\u767B\u5F55\u6210\u529F"),g.push("/home")):m.error(o.message||"\u767B\u5F55\u5931\u8D25")}catch(o){console.error("\u767B\u5F55\u9519\u8BEF",o),m.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u670D\u52A1\u5668\u72B6\u6001")}finally{u.value=!1}}})}catch(i){console.error("\u8868\u5355\u9A8C\u8BC1\u9519\u8BEF",i),u.value=!1,m.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165")}},y=()=>{console.log("\u8DF3\u8F6C\u5230\u6CE8\u518C\u9875\u9762")};return(i,e)=>{const l=n("el-input"),o=n("el-form-item"),b=n("el-checkbox"),k=n("el-button"),w=n("el-form");return I(),R("div",U,[d("div",h,[e[5]||(e[5]=d("div",{class:"title-container"},[d("h3",{class:"title"},"\u9AD8\u8003\u5FD7\u613F\u586B\u62A5\u8F85\u52A9\u7CFB\u7EDF")],-1)),r(w,{model:s,ref_key:"loginFormRef",ref:c,rules:v},{default:t(()=>[r(o,{prop:"username"},{default:t(()=>[r(l,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.username=a),placeholder:"\u7528\u6237\u540D","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),r(o,{prop:"password"},{default:t(()=>[r(l,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),type:"password",placeholder:"\u5BC6\u7801","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(o,null,{default:t(()=>[r(b,{modelValue:s.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=a=>s.rememberMe=a)},{default:t(()=>e[3]||(e[3]=[f("\u8BB0\u4F4F\u5BC6\u7801")])),_:1,__:[3]},8,["modelValue"])]),_:1}),r(k,{loading:u.value,type:"primary",class:"login-button",onClick:x},{default:t(()=>e[4]||(e[4]=[f(" \u767B\u5F55 ")])),_:1,__:[4]},8,["loading"]),d("div",{class:"register-link"},[d("a",{onClick:y},"\u7ACB\u5373\u6CE8\u518C")])]),_:1},8,["model","rules"])])])}}},S=M(B,[["__scopeId","data-v-609a7f01"]]);export{S as default};
